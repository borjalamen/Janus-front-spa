<mat-sidenav-container>

  <!-- ──────────────────────────────── -->
  <!--  MENÚ LATERAL                   -->
  <!-- ──────────────────────────────── -->
  <mat-sidenav mode="side" opened>
      <mat-toolbar color="primary" class="sidenav-toolbar">
      <img src="assets/images/7dRimV7.png" alt="JanusHub" class="janus" />
    </mat-toolbar>

    <mat-nav-list class="scroll-nat-nav-list">

      <!-- Bienvenida (sempre visible) -->
      <a mat-list-item routerLink="/home">
        <mat-icon>home</mat-icon>
        <span class="menu-text"><strong>Bienvenida</strong></span>
      </a>

      <!-- Proyectos -->
      <a *ngIf="canShow('proyectos')" mat-list-item routerLink="/projects">
        <mat-icon>folder_open</mat-icon>
        <span class="menu-text"><strong>Proyectos</strong></span>
      </a>

      <!-- Procedimientos -->
      <a *ngIf="canShow('procedimientos')" mat-list-item routerLink="/procedimientos">
        <mat-icon>assignment</mat-icon>
        <span class="menu-text"><strong>Procedimientos</strong></span>
      </a>

      <!-- Documentos -->
      <a *ngIf="canShow('documentos')" mat-list-item routerLink="/documents">
        <mat-icon>upload_file</mat-icon>
        <span class="menu-text"><strong>Documentos</strong></span>
      </a>

      <!-- Formación -->
      <a *ngIf="canShow('formacion')" mat-list-item routerLink="/formacion">
        <mat-icon>school</mat-icon>
        <span class="menu-text"><strong>Formación</strong></span>
      </a>

      <!-- Planificación -->
      <a *ngIf="canShow('planificacion')" mat-list-item routerLink="/planificacion">
        <mat-icon>event_note</mat-icon>
        <span class="menu-text"><strong>Planificación</strong></span>
      </a>

      <!-- Administración -->
      <a *ngIf="canShow('administracion')" mat-list-item routerLink="/administracion">
        <mat-icon>admin_panel_settings</mat-icon>
        <span class="menu-text"><strong>Administración</strong></span>
      </a>

      <!-- Bitácora -->
      <a *ngIf="canShow('bitacora')" mat-list-item routerLink="/bitacora">
        <mat-icon>bug_report</mat-icon>
        <span class="menu-text"><strong>Bitácora</strong></span>
      </a>

    </mat-nav-list>
  </mat-sidenav>

  <!-- ──────────────────────────────── -->
  <!--  CONTENIDO PRINCIPAL            -->
  <!-- ──────────────────────────────── -->
  <mat-sidenav-content>

    <!-- Logos -->
    <div class="banner-imatges">
  <a href="https://git.intranet.gencat.cat/" target="_blank" rel="noopener noreferrer">
    <img src="assets/images/bknE50v.png" class="imatge-menu" title="Git Intranet Gencat" />
  </a>
  <a href="https://codi.qualitat.solucions.gencat.cat" target="_blank" rel="noopener noreferrer">
    <img src="assets/images/Zadx1Z5.png" class="imatge-menu" title="Codi Qualitat Solucions Gencat" />
  </a>
  <a href="https://bin.sic.intranet.gencat.cat/" target="_blank" rel="noopener noreferrer">
    <img src="assets/images/YTUL8j6.png" class="imatge-menu" title="BIN SIC Intranet Gencat" />
  </a>
  <a href="https://cicd.sic.intranet.gencat.cat/" target="_blank" rel="noopener noreferrer">
    <img src="assets/images/YDyH4j0.png" class="imatge-menu" title="CI/CD SIC Intranet Gencat" />
  </a>
  <a href="https://console-openshift-console.apps.cer01-gct-007-k01.cpd2pre.intranet.gencat.cat/dev-monitoring/"
     target="_blank" rel="noopener noreferrer">
    <img src="assets/images/rL2dIOn.png" class="imatge-menu" title="OpenShift Dev Monitoring PRE" />
  </a>
  <a href="https://console-openshift-console.apps.cer01-gct-008-k01.cpd2.intranet.gencat.cat/dev-monitoring/"
     target="_blank" rel="noopener noreferrer">
    <img src="assets/images/LMRdKym.png" class="imatge-menu" title="OpenShift Dev Monitoring PROD" />
  </a>
  <a href="https://bitbucket.indra.es/" target="_blank" rel="noopener noreferrer">
    <img src="assets/images/aLBxDxO.png" class="imatge-menu" title="Bitbucket Indra" />
  </a>
  <a href="https://qamindce.indra.es/" target="_blank" rel="noopener noreferrer">
    <img src="assets/images/0vFxwra.png" class="imatge-menu" title="QA Mindce Indra" />
  </a>
  <a href="https://slmaven.indra.es/nexus/#browse/browse" target="_blank" rel="noopener noreferrer">
    <img src="assets/images/ZOQXBuY.png" class="imatge-menu" title="Nexus SLMaven" />
  </a>
  <a href="https://console-openshift-console.apps-crc.testing/k8s/ns/ms-crc-dev-env/" target="_blank"
     rel="noopener noreferrer">
    <img src="assets/images/swGo7Aa.png" class="imatge-menu" title="OpenShift CRC Dev" />
  </a>
  <a href="https://console-openshift-console.apps-crc.testing/k8s/ns/ms-crc-int-env/" target="_blank"
     rel="noopener noreferrer">
    <img src="assets/images/dhXgpv5.png" class="imatge-menu" title="OpenShift CRC Int" />
  </a>

  <!-- Jenkins -->
  <a routerLink="/jenkins">
    <img src="assets/images/69aimFa.png" class="imatge-menu imatge-menu-jenkins" title="Jenkins" />
  </a>
</div>

    <!-- ──────────────────────────────── -->
    <!--  TOOLBAR SUPERIOR               -->
    <!-- ──────────────────────────────── -->
    <mat-toolbar color="primary" class="main-toolbar">
  <span class="app-title">JanusHub Portal</span>
  <span class="spacer"></span>

  <!-- ICONA ÚNICA -->
  <div class="user-dropdown-container">
    <div class="user-icon"
         (click)="username ? userMenuOpen = !userMenuOpen : openLoginDialog()">
      <mat-icon>person</mat-icon>
    </div>

    <!-- Menú només si hi ha usuari -->
    <div class="dropdown-user-menu" *ngIf="userMenuOpen && username">
       <p>Usuario: <strong>{{ username }}</strong></p>

  <!-- AFEGEIX AQUI el botó de secció usuari -->
  <button mat-button (click)="abrirSeccionUsuario()">
    <mat-icon>manage_accounts</mat-icon> Perfil
  </button>

  <button mat-button color="warn" (click)="logout()">
    <mat-icon>logout</mat-icon> Cerrar sesión
  </button>
</div>
  </div>
</mat-toolbar>

    <!-- CONTENIDO INTERIOR -->
    <div class="main-content menu-content-scroll">
      <router-outlet></router-outlet>
    </div>



    <!-- FOOTER -->
    <footer class="footer">
      <span>Copyright |
        <strong>{{ appVersion ?? 'obteniendo versión...' }}</strong>
      </span>
    </footer>
  </mat-sidenav-content>
</mat-sidenav-container>